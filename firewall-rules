# Firewall Rules and Network Segmentation
This document outlines the planned firewall rules, segmentation strategy, and traffic flow for the homelab network. Exact IP addressing is intentionally omitted for security and privacy.

---

## 1. Network Zones

### WAN
- Upstream connection from Eero (ISP handoff)
- ER605 WAN1 receives public/ISP-provided addressing
- No inbound traffic allowed by default

### LAN-Core
- Primary internal network
- Servers, hypervisor, management systems, and core switches
- Full access to internal resources
- Restricted access to Guest/IoT network

### Guest/IoT (Downstream Router Network)
- Provided by Tenda AC1200 router
- Isolated from LAN-Core
- Internet-only access unless explicitly allowed

### Lab/Expansion Networks (Optional)
- Additional isolated LANs for testing
- No default access to LAN-Core or Guest/IoT

---

## 2. Default Firewall Policy

### Inbound (WAN → LAN)
- Deny all unsolicited inbound traffic
- Allow established/related connections

### Outbound (LAN → WAN)
- Allow all outbound traffic from LAN-Core
- Allow all outbound traffic from Guest/IoT
- Block Guest/IoT from accessing LAN-Core

### Inter-LAN Traffic
- LAN-Core → Guest/IoT: Deny by default
- Guest/IoT → LAN-Core: Deny by default
- LAN-Core → Lab Networks: Allow (optional)
- Lab Networks → LAN-Core: Deny by default

---

## 3. Required Allow Rules

### LAN-Core → Internet
- Allow outbound DNS, HTTP, HTTPS
- Allow outbound NTP
- Allow outbound traffic for updates and package repositories

### Guest/IoT → Internet
- Allow outbound DNS, HTTP, HTTPS
- Allow outbound traffic for device updates
- Deny access to LAN-Core

### LAN-Core → Tenda Router (Management)
- Allow access to Tenda web UI from LAN-Core only
- Deny access from Guest/IoT to ER605 or switches

---

## 4. Logging and Monitoring

### ER605 Firewall Logging
- Log all denied WAN inbound attempts
- Log inter-LAN denied traffic
- Log administrative access attempts

### Syslog/SIEM Integration
- Forward ER605 logs to monitoring VM
- Forward Tenda logs (if supported)
- Forward Windows Event Logs from servers and clients

---

## 5. Future Enhancements
- VLAN segmentation on access switches
- Separate VLAN for servers
- Separate VLAN for management interfaces
- Firewall rules based on VLANs instead of physical LAN ports
- Geo-blocking or country-based filtering
- IDS/IPS integration (Suricata, Wazuh, or similar)
